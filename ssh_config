# SSH Client Configuration
# Security best practices + convenience features
#
# Install: ln -s ~/dotfiles/ssh_config ~/.ssh/config
# Permissions: chmod 600 ~/.ssh/config

# Global defaults
Host *
    # Security
    Protocol 2
    PasswordAuthentication no
    PubkeyAuthentication yes
    IdentitiesOnly yes
    HashKnownHosts yes

    # Use strong algorithms only
    KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512
    HostKeyAlgorithms ssh-ed25519,rsa-sha2-512,rsa-sha2-256
    Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com
    MACs hmac-sha2-512-etm@openssh.com,hmac-sha2-256-etm@openssh.com

    # Connection handling
    ServerAliveInterval 60
    ServerAliveCountMax 3
    TCPKeepAlive yes
    Compression yes

    # macOS Keychain integration
    AddKeysToAgent yes
    UseKeychain yes

    # Multiplexing (faster subsequent connections)
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%r@%h-%p
    ControlPersist 600

# GitHub
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519

# GitLab
Host gitlab.com
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/id_ed25519

# Bitbucket
Host bitbucket.org
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519

# Example server template (uncomment and customize)
# Host myserver
#     HostName server.example.com
#     User myuser
#     IdentityFile ~/.ssh/id_ed25519_server
#     Port 22
